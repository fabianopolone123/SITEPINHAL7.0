<!doctype html>
{% load static %}
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Compromisso para Voluntários</title>
  <link rel="stylesheet" href="{% static 'css/styles.css' %}" />
  <style>
    :root{--orange:#f3a75a;--blue:#2aa6d6;--title:#2c6fa3;--text:#222}
    *{box-sizing:border-box}
    body{
      margin:0;
      padding:24px;
      font-family:Arial,Helvetica,sans-serif;
      background:
        radial-gradient(circle at 8% 8%, rgba(37,99,235,.14), transparent 42%),
        radial-gradient(circle at 92% 12%, rgba(14,165,233,.12), transparent 40%),
        linear-gradient(180deg,#f7fbff 0%,#eef4fb 100%);
      color:#0f172a;
    }
    .page{max-width:900px;margin:0 auto;background:#fff;border:1px solid #dbeafe;border-radius:22px;padding:14px;box-shadow:0 28px 60px rgba(15,23,42,.12)}
    .inner{border:1px solid #bfdbfe;border-radius:18px;padding:16px 16px 52px;background:#fff;position:relative}
    .flow-progress{
      display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap;
      margin:0 0 12px;padding:10px 12px;border-radius:14px;background:linear-gradient(135deg,#eff6ff,#f0f9ff);
      border:1px solid #dbeafe;
    }
    .flow-badge{display:inline-flex;align-items:center;padding:6px 10px;border-radius:999px;background:#fff;border:1px solid #bfdbfe;color:#1e40af;font-size:12px;font-weight:700}
    .muted-note{font-size:12px;color:#475569}
    .header{display:grid;grid-template-columns:140px 1fr 120px;gap:12px;align-items:start;background:linear-gradient(180deg,#fbfdff,#f8fbff);border:1px solid #e2e8f0;border-radius:16px;padding:12px}
    .photo-area{max-width:130px}
    .photo-area p{margin:0 0 6px;font-size:14px;font-weight:700;text-align:center;color:#1f2937}
    .photo-placeholder{width:120px;height:160px;border:1px dashed #9ca3af;display:flex;align-items:center;justify-content:center;margin-bottom:8px;font-weight:700;text-align:center;background:#fff;border-radius:8px}
    #foto-preview{width:120px;height:160px;object-fit:cover;border:1px solid #94a3b8;display:none;margin-bottom:8px;background:#fff;border-radius:8px}
    .header-center{text-align:center}
    .header .title1{font-weight:800;font-size:20px;letter-spacing:.4px;color:#123c7a}
    .header .title2{font-size:13px;margin-top:4px;letter-spacing:.3px;color:#1e3a8a}
    .logo{width:110px;height:110px;object-fit:cover;border-radius:10px;box-shadow:0 10px 20px rgba(15,23,42,.10);justify-self:end}
    .main-title{text-align:center;font-size:34px;font-weight:800;background:linear-gradient(135deg,#1d4ed8,#0ea5e9);-webkit-background-clip:text;background-clip:text;color:transparent;margin:18px 0 14px;border-bottom:1px solid #dbeafe;padding-bottom:8px}
    .section{margin-top:12px;border:1px solid #e2e8f0;border-radius:14px;padding:12px;background:#fff}
    .section-title{font-weight:800;font-size:18px;margin:0 0 10px;color:#1e3a8a}
    .field{margin:9px 0;display:flex;gap:8px;align-items:center;flex-wrap:wrap}
    .field-label{font-weight:700;color:#334155;font-size:13px}
    .line-input{border:none;border-bottom:1px solid #60a5fa;background:rgba(239,246,255,.55);border-radius:6px 6px 0 0;padding:6px 7px;font-size:14px;outline:none}
    .full{width:100%}.half{width:min(320px,100%)}.small{width:120px}
    .radio-group{display:flex;gap:18px;align-items:center;flex-wrap:wrap;font-size:14px}
    .textarea{width:100%;border:1px solid #cbd5e1;border-radius:10px;padding:8px;outline:none;resize:vertical;min-height:44px}
    .signature-widget{max-width:560px;margin:0 auto;text-align:center;background:#f8fbff;border:1px solid #dbeafe;border-radius:14px;padding:12px}
    .signature-widget canvas{width:100%;max-width:500px;border:1px solid #cbd5e5;border-radius:10px;background:#fff;min-height:130px}
    .action-row{display:flex;gap:10px;flex-wrap:wrap;align-items:center;margin-top:10px}
    .btn{padding:9px 14px;border-radius:12px;border:1px solid #cbd5e5;background:#fff;cursor:pointer;font-size:14px;text-decoration:none;color:#0f172a;font-weight:700;transition:transform .15s ease, box-shadow .15s ease}
    .btn:hover{transform:translateY(-1px);box-shadow:0 10px 20px rgba(15,23,42,.08)}
    .btn.primary{background:linear-gradient(135deg,#1d4ed8,#2563eb);border-color:#1d4ed8;color:#fff}
    .status{margin-top:12px}
    .status p[data-state="error"]{color:#b91c1c}
    .footer{margin-top:14px;border-top:1px solid #dbeafe;padding-top:10px;display:flex;gap:10px}
    .badge{width:44px;height:44px;border-radius:50%;object-fit:cover;box-shadow:0 8px 18px rgba(15,23,42,.08)}
    .required-sign-label.required-marked::after,.field-label.required-marked::after{content:" *";color:#b91c1c;font-weight:700}
    @media (max-width: 820px){
      body{padding:8px}
      .header{grid-template-columns:1fr}
      .logo{justify-self:start}
      .main-title{font-size:28px}
      .line-input,.textarea{font-size:16px}
      .half,.small{width:100%}
    }
  </style>
</head>
<body>
  <div class="page">
    <div class="inner">
      <form method="post" data-required-mode="explicit">
        {% csrf_token %}

        <div class="flow-progress">
          <div>
            <strong style="color:#1d4ed8;">Etapa 2/4 · Compromisso para voluntários</strong>
            <div class="muted-note">Cadastro da diretoria</div>
          </div>
          <div style="display:flex;gap:8px;flex-wrap:wrap;">
            <span class="flow-badge">Login OK</span>
            <span class="flow-badge">Compromisso</span>
          </div>
        </div>

        <div class="header">
          <div class="photo-area">
            <p><strong>*</strong> Foto 3x4</p>
            <div id="photo-placeholder" class="photo-placeholder">FOTO<br />3X4</div>
            <img id="foto-preview" alt="Prévia da foto 3x4" />
            <input id="foto-file" type="file" accept="image/*" />
            <input id="foto-3x4" type="hidden" name="foto_3x4" value="{{ step_data.foto_3x4|default:'' }}" data-required="true" data-required-target=".photo-area p strong" />
          </div>
          <div class="header-center">
            <div class="title1">CLUBE DE AVENTUREIROS</div>
            <div class="title2">IGREJA ADVENTISTA DO SÉTIMO DIA</div>
          </div>
          <img class="logo" src="{% static 'images/logo_htmls.jpg' %}?v=3" alt="Logo" />
        </div>

        <div class="main-title">Compromisso para Voluntários</div>

        <div class="section">
          <h3 class="section-title">Informações Pessoais</h3>
          <div class="field"><span class="field-label required-marked">Nome:</span> <input class="line-input full" name="nome" type="text" value="{{ step_data.nome|default:'' }}" required /></div>
          <div class="field"><span class="field-label required-marked">Igreja:</span> <input class="line-input half" name="igreja" type="text" value="{{ step_data.igreja|default:'' }}" required /> <span class="field-label required-marked">Distrito:</span> <input class="line-input half" name="distrito" type="text" value="{{ step_data.distrito|default:'' }}" required /></div>
          <div class="field"><span class="field-label required-marked">Endereço:</span> <input class="line-input half" name="endereco" type="text" value="{{ step_data.endereco|default:'' }}" required /> <span class="field-label required-marked">Nº:</span> <input class="line-input small" name="numero" type="text" value="{{ step_data.numero|default:'' }}" required /></div>
          <div class="field"><span class="field-label required-marked">Bairro:</span> <input class="line-input half" name="bairro" type="text" value="{{ step_data.bairro|default:'' }}" required /> <span class="field-label required-marked">Cidade:</span> <input class="line-input half" name="cidade" type="text" value="{{ step_data.cidade|default:'' }}" required /></div>
          <div class="field"><span class="field-label required-marked">CEP:</span> <input class="line-input half" name="cep" type="text" value="{{ step_data.cep|default:'' }}" required /> <span class="field-label required-marked">Estado:</span> <input class="line-input small" name="estado" type="text" value="{{ step_data.estado|default:'' }}" required /></div>
          <div class="field"><span class="field-label required-marked">E-mail:</span> <input class="line-input half" name="email" type="email" value="{{ step_data.email|default:'' }}" required /> <span class="field-label required-marked">WhatsApp:</span> <input class="line-input half" name="whatsapp" type="text" value="{{ step_data.whatsapp|default:'' }}" required /></div>
          <div class="field"><span class="field-label">Tel. Residencial (se tiver):</span> <input class="line-input half" name="telefone_residencial" type="text" value="{{ step_data.telefone_residencial|default:'' }}" data-optional="true" /> <span class="field-label">Tel. Comercial (se tiver):</span> <input class="line-input half" name="telefone_comercial" type="text" value="{{ step_data.telefone_comercial|default:'' }}" data-optional="true" /></div>
          <div class="field"><span class="field-label required-marked">Data de nascimento:</span> <input class="line-input small" name="nascimento" type="date" value="{{ step_data.nascimento|default:'' }}" required /> <span class="field-label required-marked">Estado civil:</span> <input class="line-input half" name="estado_civil" type="text" value="{{ step_data.estado_civil|default:'' }}" required /></div>
          <div class="field"><span class="field-label required-marked">CPF:</span> <input class="line-input half" name="cpf" type="text" value="{{ step_data.cpf|default:'' }}" required /> <span class="field-label required-marked">RG:</span> <input class="line-input half" name="rg" type="text" value="{{ step_data.rg|default:'' }}" required /></div>
          <div class="field"><span class="field-label">Cônjuge:</span> <input class="line-input full" name="conjuge" type="text" value="{{ step_data.conjuge|default:'' }}" data-optional="true" /></div>
          <div class="field"><span class="field-label">Filho(a) 1:</span> <input class="line-input full" name="filho_1" type="text" value="{{ step_data.filho_1|default:'' }}" data-optional="true" /></div>
          <div class="field"><span class="field-label">Filho(a) 2:</span> <input class="line-input full" name="filho_2" type="text" value="{{ step_data.filho_2|default:'' }}" data-optional="true" /></div>
          <div class="field"><span class="field-label">Filho(a) 3:</span> <input class="line-input full" name="filho_3" type="text" value="{{ step_data.filho_3|default:'' }}" data-optional="true" /></div>
        </div>

        <div class="section">
          <h3 class="section-title">Informações de Saúde</h3>
          <div class="field">Possui alguma dificuldade de saúde que limite sua participação total nas atividades do clube?</div>
          <div class="radio-group">
            <label><input type="radio" name="possui_limitacao_saude" value="sim" {% if step_data.possui_limitacao_saude == 'sim' %}checked{% endif %} required /> Sim</label>
            <label><input type="radio" name="possui_limitacao_saude" value="nao" {% if step_data.possui_limitacao_saude == 'nao' %}checked{% endif %} required /> Não</label>
          </div>
          <div class="field">Em caso afirmativo, descreva:</div>
          <textarea class="textarea" name="limitacao_saude_descricao" data-optional="true">{{ step_data.limitacao_saude_descricao|default:'' }}</textarea>
        </div>

        <div class="section">
          <h3 class="section-title">Informações Educacionais</h3>
          <div class="radio-group">
            <span class="field-label required-marked">Escolaridade:</span>
            <label><input type="radio" name="escolaridade" value="fundamental" {% if step_data.escolaridade == 'fundamental' %}checked{% endif %} required /> Ensino Fundamental</label>
            <label><input type="radio" name="escolaridade" value="medio" {% if step_data.escolaridade == 'medio' %}checked{% endif %}> Ensino Médio</label>
            <label><input type="radio" name="escolaridade" value="faculdade" {% if step_data.escolaridade == 'faculdade' %}checked{% endif %}> Faculdade</label>
          </div>
        </div>

        <div class="section">
          <label>
            <input type="checkbox" name="declaracao_medica" value="on" {% if step_data.declaracao_medica %}checked{% endif %} required />
            Atesto serem verdadeiras as informações médicas preenchidas e me responsabilizo por quaisquer acidentes decorrentes da omissão de problemas médicos.
          </label>
        </div>

        <div class="section">
          <div class="signature-widget">
            <p class="required-sign-label required-marked">Assinatura</p>
            <canvas width="500" height="170"></canvas>
            <input type="hidden" name="assinatura_compromisso" value="{{ step_data.assinatura_compromisso|default:'' }}" data-required="true" data-required-target=".required-sign-label" />
            <div class="action-row" style="justify-content:center;">
              <button type="button" class="btn" data-action="clear-sign">Limpar</button>
              <button type="button" class="btn primary" data-action="save-sign">Salvar assinatura</button>
            </div>
            <p class="signature-status"></p>
          </div>
        </div>

        <div class="status" aria-live="polite">
          {% for message in messages %}
            <p data-state="{{ message.tags }}">{{ message }}</p>
          {% endfor %}
        </div>

        <div class="action-row">
          <a class="btn" href="{% url 'accounts:novo_diretoria_login' %}">Voltar</a>
          <button type="submit" class="btn primary">Próximo</button>
        </div>

        <div class="footer">
          <img class="badge" src="{% static 'images/icone1.png' %}?v=3" alt="Ícone 1" />
          <img class="badge" src="{% static 'images/icone2.png' %}?v=3" alt="Ícone 2" />
          <img class="badge" src="{% static 'images/icone3.png' %}?v=3" alt="Ícone 3" />
          <img class="badge" src="{% static 'images/icone4.png' %}?v=3" alt="Ícone 4" />
        </div>
      </form>
    </div>
  </div>
  <script src="{% static 'js/novo_cadastro.js' %}" defer></script>
</body>
</html>
