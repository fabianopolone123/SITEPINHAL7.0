<!DOCTYPE html>
{% load static %}
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Usuários</title>
  <link rel="stylesheet" href="{% static 'css/styles.css' %}" />
</head>
<body class="painel-page">
  {% include '_painel_sidebar.html' %}
  <main class="painel-content">
    <header class="painel-header">
      <h2>Usuários</h2>
      <p>Visualize usuários e ajuste os perfis de permissão.</p>
    </header>

    <section class="painel-card">
      <table class="users-table">
        <thead>
          <tr>
            <th>Foto</th>
            <th>Usuário</th>
            <th>Nome completo</th>
            <th>Perfis</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          {% for item in users %}
            <tr>
              <td>
                {% if item.foto_url %}
                  <img class="confirmation-photo" src="{{ item.foto_url }}" alt="Foto de {{ item.nome_completo }}" />
                {% else %}
                  -
                {% endif %}
              </td>
              <td><a href="{% url 'accounts:usuario_detalhe' item.user.pk %}">{{ item.user.username }}</a></td>
              <td>{{ item.nome_completo }}</td>
              <td>{{ item.access.get_profiles_display|join:", " }}</td>
              <td>{% if item.user.is_active %}Ativo{% else %}Inativo{% endif %}</td>
            </tr>
          {% empty %}
            <tr>
              <td colspan="5">Nenhum usuário encontrado.</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </section>
  </main>
</body>
</html>
